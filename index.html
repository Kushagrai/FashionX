<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immersive Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            font-family: 'Barlow Condensed', sans-serif;
        }

        /* Hero Section - FIXED behind everything */
        .hero {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-image: url('model.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            z-index: 1;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0) 100%);
            pointer-events: none;
            z-index: 1;
        }

        header {
            position: relative;
            z-index: 10;
            width: 100%;
            padding: 2rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .brand {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            cursor: pointer;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .brand-x {
            font-size: 2.5rem;
            margin-left: 2px;
            font-weight: 600;
            line-height: 0.8;
            vertical-align: sub;
        }

        .brand:hover {
            opacity: 1;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 3rem;
        }

        nav a {
            text-decoration: none;
            color: white;
            font-size: 1.1rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            position: relative;
            padding-bottom: 5px;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background-color: white;
            transition: width 0.3s ease;
        }

        nav a:hover {
            opacity: 1;
        }

        nav a:hover::after {
            width: 100%;
        }

        .hero-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            padding-left: 15vw;
            padding-bottom: 5vh;
            position: relative;
            z-index: 10;
            text-align: left;
            color: white;
            transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1),
                transform 0.8s cubic-bezier(0.22, 1, 0.36, 1),
                filter 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .hero-content.hidden {
            opacity: 0;
            transform: translateY(-30px);
            filter: blur(10px);
        }

        .hero-title {
            font-size: 11rem;
            line-height: 0.85;
            letter-spacing: -0.03em;
            text-transform: uppercase;
            font-weight: 600;
            margin-left: -8px;
            opacity: 0;
            will-change: transform, opacity, filter;
            animation: blurReveal 1.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            animation-delay: 0.2s;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 0.6em;
            margin-top: 2rem;
            margin-left: 10px;
            text-transform: uppercase;
            opacity: 0;
            will-change: transform, opacity, filter;
            animation: blurReveal 1.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            animation-delay: 0.6s;
        }

        @keyframes blurReveal {
            0% {
                opacity: 0;
                transform: translateY(60px) scale(0.95);
                filter: blur(25px);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        /* ============================================
           STACKING CARDS - Sticky approach (from grainy)
           ============================================ */

        /* Scroll progress bar */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            width: 0%;
            background: linear-gradient(90deg, #8b5cf6, #3b82f6, #06b6d4);
            z-index: 9999;
            transition: width 0.05s linear;
            box-shadow: 0 0 12px rgba(139, 92, 246, 0.5);
        }

        .scroll-section {
            position: relative;
            width: 100%;
            /* dark bg to contrast with hero */
            background: #0a0a0a;
            padding-bottom: 40vh;
        }

        /* Ambient floating orbs behind cards */
        .scroll-section::before,
        .scroll-section::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(120px);
            pointer-events: none;
            z-index: 0;
            animation: orbFloat 20s ease-in-out infinite;
        }

        .scroll-section::before {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.12), transparent 70%);
            top: 15%;
            left: -10%;
        }

        .scroll-section::after {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.08), transparent 70%);
            top: 55%;
            right: -15%;
            animation-delay: -10s;
        }

        @keyframes orbFloat {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-60px) scale(1.1);
            }
        }

        /* ---- Stack Card ---- */
        .stack-card {
            position: sticky;
            width: 82%;
            max-width: 1200px;
            min-height: 640px;
            margin: 0 auto;
            border-radius: 32px;

            /* Glassmorphism */
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.35),
                inset 0 1px 0 rgba(255, 255, 255, 0.06);

            /* Scroll-driven reveal */
            opacity: 0;
            transform: translateY(80px) scale(0.97);
            transition:
                opacity 0.7s cubic-bezier(0.22, 1, 0.36, 1),
                transform 0.7s cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 0.4s ease;

            will-change: transform, opacity;
            color: white;
        }

        /* Hover lift */
        .stack-card:hover {
            box-shadow:
                0 16px 48px rgba(0, 0, 0, 0.45),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .stack-card.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* When JS is driving the cinematic zoom */
        .stack-card.zooming {
            transition: transform 0.15s ease-out, box-shadow 0.4s ease;
        }

        /* Stagger sticky top so cards pile up */
        .stack-card:nth-child(1) {
            top: 10vh;
            margin-bottom: 85vh;
            z-index: 1;
        }

        .stack-card:nth-child(2) {
            top: 12vh;
            margin-bottom: 85vh;
            z-index: 2;
        }

        .stack-card:nth-child(3) {
            top: 14vh;
            margin-bottom: 85vh;
            z-index: 3;
        }

        .stack-card:nth-child(4) {
            top: 16vh;
            margin-bottom: 85vh;
            z-index: 4;
        }

        /* Card inner layout */
        .stack-card-inner {
            padding: 3rem 3.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 420px;
            position: relative;
            z-index: 2;
        }

        /* Staggered text reveal */
        .stack-card-label,
        .stack-card-title,
        .stack-card-desc {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s cubic-bezier(0.22, 1, 0.36, 1),
                transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .stack-card.visible .stack-card-label {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.15s;
        }

        .stack-card.visible .stack-card-title {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.3s;
        }

        .stack-card.visible .stack-card-desc {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.45s;
        }

        .stack-card-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 1rem;
        }

        .stack-card-title {
            font-size: 2.8rem;
            font-weight: 600;
            letter-spacing: -0.03em;
            line-height: 1.15;
            color: rgba(255, 255, 255, 0.92);
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        .stack-card-desc {
            font-size: 1.05rem;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.5);
            max-width: 540px;
            font-weight: 300;
        }

        /* Large decorative background number */
        .stack-card-number {
            position: absolute;
            top: 50%;
            right: 3rem;
            transform: translateY(-50%);
            font-size: 14rem;
            font-weight: 800;
            line-height: 1;
            color: rgba(255, 255, 255, 0.025);
            pointer-events: none;
            z-index: 1;
            user-select: none;
            letter-spacing: -0.05em;
        }

        /* Unique accent glow per card — top edge gradient line */
        .stack-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 2px;
            border-radius: 2px;
            z-index: 3;
            opacity: 0;
            transition: opacity 0.8s ease 0.2s;
        }

        .stack-card.visible::after {
            opacity: 1;
        }

        /* Card 1 — purple */
        .stack-card:nth-child(1)::after {
            background: linear-gradient(90deg, transparent, #8b5cf6, transparent);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        /* Card 2 — cyan */
        .stack-card:nth-child(2)::after {
            background: linear-gradient(90deg, transparent, #06b6d4, transparent);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        /* Card 3 — amber */
        .stack-card:nth-child(3)::after {
            background: linear-gradient(90deg, transparent, #f59e0b, transparent);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }

        /* Card 4 — rose */
        .stack-card:nth-child(4)::after {
            background: linear-gradient(90deg, transparent, #f43f5e, transparent);
            box-shadow: 0 0 20px rgba(244, 63, 94, 0.3);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            header {
                padding: 1.5rem;
            }

            nav ul {
                gap: 1.5rem;
            }

            .hero-title {
                font-size: 5rem;
            }

            .stack-card {
                width: 92%;
                min-height: 320px;
                border-radius: 20px;
            }

            .stack-card-inner {
                padding: 2rem 1.5rem;
                min-height: 320px;
            }

            .stack-card-title {
                font-size: 1.6rem;
            }

            .stack-card-number {
                font-size: 8rem;
                right: 1.5rem;
            }

            .stack-card:nth-child(1) {
                top: 10vh;
                margin-bottom: 75vh;
            }

            .stack-card:nth-child(2) {
                top: 12vh;
                margin-bottom: 75vh;
            }

            .stack-card:nth-child(3) {
                top: 14vh;
                margin-bottom: 75vh;
            }

            .stack-card:nth-child(4) {
                top: 16vh;
                margin-bottom: 75vh;
            }

            .scroll-section::before {
                width: 300px;
                height: 300px;
            }

            .scroll-section::after {
                width: 350px;
                height: 350px;
            }
        }
    </style>
</head>

<body>

    <!-- Scroll progress bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Fixed hero background -->
    <div class="hero">
        <header>
            <div class="brand">Fashion<span class="brand-x">X</span></div>
            <nav>
                <ul>
                    <li><a href="#">Collection</a></li>
                    <li><a href="#">Gallery</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </header>
        <div class="hero-content">
            <h1 class="hero-title">Essence</h1>
            <p class="hero-subtitle">Redefining Perspectives</p>
        </div>
    </div>

    <!-- Spacer: user scrolls through 100vh of hero before cards begin -->
    <div style="height: 100vh; pointer-events: none;"></div>

    <!-- Scroll Stacking Section -->
    <section class="scroll-section">
        <div class="stack-card">
            <span class="stack-card-number">01</span>
            <div class="stack-card-inner">
                <span class="stack-card-label">01 — Vision</span>
                <h2 class="stack-card-title">Sustainable<br>Future</h2>
                <p class="stack-card-desc">Crafting a new era of fashion where ethics meet aesthetics. We prioritize
                    materials that respect the planet without compromising on luxury.</p>
            </div>
        </div>

        <div class="stack-card">
            <span class="stack-card-number">02</span>
            <div class="stack-card-inner">
                <span class="stack-card-label">02 — Process</span>
                <h2 class="stack-card-title">Digital<br>Craftsmanship</h2>
                <p class="stack-card-desc">Merging traditional tailoring with cutting-edge digital fabrication. Every
                    stitch is calculated, every silhouette is simulated.</p>
            </div>
        </div>

        <div class="stack-card">
            <span class="stack-card-number">03</span>
            <div class="stack-card-inner">
                <span class="stack-card-label">03 — Reach</span>
                <h2 class="stack-card-title">Global<br>Influence</h2>
                <p class="stack-card-desc">From the streets of Tokyo to the runways of Milan. Our designs transcend
                    borders, creating a universal language of style.</p>
            </div>
        </div>

        <div class="stack-card">
            <span class="stack-card-number">04</span>
            <div class="stack-card-inner">
                <span class="stack-card-label">04 — Canvas</span>
                <h2 class="stack-card-title">Infinite<br>Canvas</h2>
                <p class="stack-card-desc">The screen is our fabric. Exploring the intersection of technology and
                    wearable art in a space without physical limitations.</p>
            </div>
        </div>
    </section>

    <!-- Lenis Smooth Scroll -->
    <script src="https://unpkg.com/lenis@1.1.20/dist/lenis.min.js"></script>
    <script>
        (function () {
            /* ======== Lenis Smooth Scroll ======== */
            const lenis = new Lenis({
                duration: 1.6,
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                orientation: 'vertical',
                gestureOrientation: 'vertical',
                smoothWheel: true,
                wheelMultiplier: 0.8,
                touchMultiplier: 1.5,
                infinite: false,
            });

            function raf(time) {
                lenis.raf(time);
                requestAnimationFrame(raf);
            }
            requestAnimationFrame(raf);

            /* ======== Card Reveal via IntersectionObserver ======== */
            const cards = document.querySelectorAll('.stack-card');
            const heroContent = document.querySelector('.hero-content');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.15,
                rootMargin: '0px 0px -60px 0px'
            });

            cards.forEach(card => observer.observe(card));

            /* ======== Hide hero text when first card appears ======== */
            const firstCard = cards[0];
            if (firstCard && heroContent) {
                const heroObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            heroContent.classList.add('hidden');
                        } else {
                            heroContent.classList.remove('hidden');
                        }
                    });
                }, {
                    threshold: 0.1
                });
                heroObserver.observe(firstCard);
            }

            /* ======== Scroll Progress Bar ======== */
            const progressBar = document.getElementById('scrollProgress');

            /* ======== Scroll-Driven Cinematic Zoom ======== */
            const vh = window.innerHeight;

            lenis.on('scroll', ({ scroll, limit }) => {
                // Progress bar
                const progress = limit > 0 ? (scroll / limit) * 100 : 0;
                progressBar.style.width = progress + '%';

                // Cinematic zoom on each card
                cards.forEach((card, i) => {
                    if (!card.classList.contains('visible')) return;

                    const cardTop = card.offsetTop;
                    const stickyTopPx = parseFloat(getComputedStyle(card).top) || 0;

                    // Card becomes stuck when scroll >= cardTop - stickyTopPx
                    const stickStart = cardTop - stickyTopPx;
                    const stickDuration = 85 * (vh / 100);

                    // 0 → 1 through the sticky scroll zone
                    const stickyProgress = (scroll - stickStart) / stickDuration;

                    if (stickyProgress > 0.05 && stickyProgress < 0.95) {
                        const clamped = Math.max(0, Math.min(1, stickyProgress));
                        // Bell curve: 0 → 1 → 0
                        const bell = Math.sin(clamped * Math.PI);

                        const shiftX = bell * 6;          // whole card shifts right
                        const scaleVal = 1 + bell * 0.14;  // whole card zooms in
                        const rotY = bell * -2.5;          // subtle 3D tilt
                        const liftY = bell * -10;          // lifts up slightly

                        card.classList.add('zooming');
                        card.style.transform =
                            `translateY(${liftY}px) translateX(${shiftX}%) scale(${scaleVal}) perspective(1200px) rotateY(${rotY}deg)`;
                        card.style.boxShadow =
                            `0 ${16 + bell * 24}px ${48 + bell * 32}px rgba(0,0,0,${0.35 + bell * 0.2}), inset 0 1px 0 rgba(255,255,255,0.06)`;
                    } else {
                        card.classList.remove('zooming');
                        card.style.transform = '';
                        card.style.boxShadow = '';
                    }
                });
            });
        })();
    </script>

</body>

</html>
